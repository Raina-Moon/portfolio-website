@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  scroll-behavior: smooth;
}

/* ===== Glowing Edge Card ===== */
:root{
  --glow-sens: 20;
  --blend: soft-light;
  --glow-blend: plus-lighter;
  --glow-color: 40deg 80% 80%;
}

.glow-card{
  /* 레이아웃/모양 */
  position: relative;
  isolation: isolate;              /* 의사요소 겹침 안정화 */
  border-radius: 1.5rem;           /* Tailwind의 rounded-3xl와 일치 */
  border: 1px solid rgb(255 255 255 / 25%);
  background: linear-gradient(8deg, hsl(260 10% 12%) 75%, hsl(260 10% 14%) 75.5%);
  transition: box-shadow .25s ease-out, filter .25s ease-out;
  overflow: hidden;
    --edge: 50px;   /* 엣지 색 두께 (작게=테두리 얇음, 크게=두꺼움) */

  /* 효과 관련 변수 */
  --color-sens: calc(var(--glow-sens) + 20);
}

/* hover 시 기본 카드 반응 (선택) */
.glow-card:hover{
  filter: brightness(1.04);
  box-shadow:
    0 1px 2px rgba(0,0,0,.08),
    0 8px 24px rgba(0,0,0,.18);
}

/* 공통: 의사요소와 .glow의 기본 세팅 */
.glow-card::before{
  border: 1px solid transparent;
  background:
    linear-gradient(#0000 0 100%) border-box,
    radial-gradient(at 80% 55%, hsl(268 100% 76%) 0, transparent 50%) border-box,
    radial-gradient(at 69% 34%, hsl(349 100% 74%) 0, transparent 50%) border-box,
    radial-gradient(at  8%  6%, hsl(136 100% 78%) 0, transparent 50%) border-box,
    radial-gradient(at 41% 38%, hsl(192 100% 64%) 0, transparent 50%) border-box,
    radial-gradient(at 86% 85%, hsl(186 100% 74%) 0, transparent 50%) border-box,
    radial-gradient(at 82% 18%, hsl( 52 100% 65%) 0, transparent 50%) border-box,
    radial-gradient(at 51%  4%, hsl( 12 100% 72%) 0, transparent 50%) border-box,
    linear-gradient(#c299ff 0 100%) border-box;

  /* 엣지 근접도에 따라 투명도 */
  opacity: calc((var(--pointer-d,0) - var(--color-sens)) / (100 - var(--color-sens)));

  /* --- 여기부터 마스크를 '엣지 링' ∩ '포인터 방향 콘'으로 교차 --- */
  mask-image:
    var(--ring),
    conic-gradient(from var(--pointer-°,0deg) at center, #000 25%, #0000 40% 60%, #000 75%);
  /* 표준 */
  mask-composite: intersect;
  /* Safari/WebKit 교차(Intersection) 대체 */
  -webkit-mask-image:
    var(--ring),
    conic-gradient(from var(--pointer-°,0deg) at center, #000 25%, #0000 40% 60%, #000 75%);
  -webkit-mask-composite: source-over, source-in;
}
.glow-card::after{
  border: 1px solid transparent;
  background:
    radial-gradient(at 80% 55%, hsl(268 100% 76%) 0, transparent 50%) padding-box,
    radial-gradient(at 69% 34%, hsl(349 100% 74%) 0, transparent 50%) padding-box,
    radial-gradient(at  8%  6%, hsl(136 100% 78%) 0, transparent 50%) padding-box,
    radial-gradient(at 41% 38%, hsl(192 100% 64%) 0, transparent 50%) padding-box,
    radial-gradient(at 86% 85%, hsl(186 100% 74%) 0, transparent 50%) padding-box,
    radial-gradient(at 82% 18%, hsl( 52 100% 65%) 0, transparent 50%) padding-box,
    radial-gradient(at 51%  4%, hsl( 12 100% 72%) 0, transparent 50%) padding-box,
    linear-gradient(#c299ff 0 100%) padding-box;

  opacity: calc((var(--pointer-d,0) - var(--color-sens)) / (100 - var(--color-sens)));
  mix-blend-mode: var(--blend);

  /* --- 엣지 링 ∩ 포인터 방향 콘 --- */
  mask-image:
    var(--ring),
    conic-gradient(from var(--pointer-°,0deg) at center, #0000 5%, #000 15% 85%, #0000 95%);
  mask-composite: intersect;

  -webkit-mask-image:
    var(--ring),
    conic-gradient(from var(--pointer-°,0deg) at center, #0000 5%, #000 15% 85%, #0000 95%);
  -webkit-mask-composite: source-over, source-in;
}
.glow-card > .glow{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  transition: opacity .25s ease-out;
  z-index: -1; /* 배경에서 동작 */
    --outset: 100px; /* 커질수록 바깥으로 더 퍼짐 */
}

/* 포인터가 멀면 자연스럽게 사라지게 */
.glow-card:not(:hover):not(.glow-animating)::before,
.glow-card:not(:hover):not(.glow-animating)::after,
.glow-card:not(:hover):not(.glow-animating) > .glow{
  opacity: 0;
  transition: opacity .6s ease-in-out;
}

/* ::after — 내부 메시 배경 + 스퀴클 컷아웃 + 원뿔 마스크 */
.glow-card::after{
  border: 1px solid transparent;
  background:
    radial-gradient(at 80% 55%, hsl(268 100% 76%) 0, transparent 50%) padding-box,
    radial-gradient(at 69% 34%, hsl(349 100% 74%) 0, transparent 50%) padding-box,
    radial-gradient(at  8%  6%, hsl(136 100% 78%) 0, transparent 50%) padding-box,
    radial-gradient(at 41% 38%, hsl(192 100% 64%) 0, transparent 50%) padding-box,
    radial-gradient(at 86% 85%, hsl(186 100% 74%) 0, transparent 50%) padding-box,
    radial-gradient(at 82% 18%, hsl( 52 100% 65%) 0, transparent 50%) padding-box,
    radial-gradient(at 51%  4%, hsl( 12 100% 72%) 0, transparent 50%) padding-box,
    linear-gradient(#c299ff 0 100%) padding-box;
  mask-image:
    linear-gradient(#000, #000),
    radial-gradient(ellipse at 50% 50%, #000 40%, #0000 65%),
    radial-gradient(ellipse at 66% 66%, #000 5%, #0000 40%),
    radial-gradient(ellipse at 33% 33%, #000 5%, #0000 40%),
    radial-gradient(ellipse at 66% 33%, #000 5%, #0000 40%),
    radial-gradient(ellipse at 33% 66%, #000 5%, #0000 40%),
    conic-gradient(from var(--pointer-°,0deg) at center, #0000 5%, #000 15% 85%, #0000 95%);
  /* 사파리 호환용 */
  -webkit-mask-composite: destination-out, source-over, source-over, source-over, source-over, source-over, source-over;
  mask-composite: subtract, add, add, add, add, add;

  opacity: calc((var(--pointer-d,0) - var(--color-sens)) / (100 - var(--color-sens)));
  mix-blend-mode: var(--blend);
}

/* .glow — 바깥쪽 글로우 (outset 패딩으로 넘치게) */
.glow-card > .glow{
  --outset: 40px;
  inset: calc(var(--outset) * -1);
  pointer-events: none;
  z-index: 1;
  mask-image: conic-gradient(from var(--pointer-°,0deg) at center, #000 2.5%, #0000 10% 90%, #000 97.5%);
  opacity: calc((var(--pointer-d,0) - var(--glow-sens)) / (100 - var(--glow-sens)));
  mix-blend-mode: var(--glow-blend);
}

.glow-card > .glow::before{
  content:"";
  position: absolute;
  inset: var(--outset);
  border-radius: inherit;
  box-shadow:
    inset 0 0 0 1px hsl(var(--glow-color) / 1),
    inset 0 0 2px 2px hsl(var(--glow-color) / .9),
    inset 0 0 5px 1px hsl(var(--glow-color) / .75),
    inset 0 0 8px 1px hsl(var(--glow-color) / .66),
    inset 0 0 15px 0 hsl(var(--glow-color) / .5),
    inset 0 0 25px 2px hsl(var(--glow-color) / .3),
    inset 0 0 50px 2px hsl(var(--glow-color) / .1),
    0 0 2px 2px hsl(var(--glow-color) / .9),
    0 0 5px 1px hsl(var(--glow-color) / .75),
    0 0 8px 1px hsl(var(--glow-color) / .66),
    0 0 15px 0 hsl(var(--glow-color) / .5),
    0 0 25px 2px hsl(var(--glow-color) / .3),
    0 0 50px 2px hsl(var(--glow-color) / .1);
}

/* ===== 3D Card (Pure CSS) ===== */
.card-3d-container {
  perspective: 1000px;
}

.card-3d {
  transform-style: preserve-3d;
  will-change: transform;
  backface-visibility: hidden;
  transition: transform 0.4s ease-out, box-shadow 0.4s ease;
}

.card-3d:hover {
  box-shadow:
    0 20px 40px rgba(0, 0, 0, 0.12),
    0 8px 16px rgba(0, 0, 0, 0.08);
}

.depth-high {
  transition: transform 0.4s ease;
}
.card-3d:hover .depth-high {
  transform: translateZ(80px);
}

.depth-base {
  transition: transform 0.4s ease;
}
.card-3d:hover .depth-base {
  transform: translateZ(50px);
}

.depth-strong {
  display: inline;
  transition: transform 0.4s ease;
}
.card-3d:hover .depth-strong {
  transform: translateZ(90px);
}

.depth-medium {
  display: inline;
  transition: transform 0.4s ease;
}
.card-3d:hover .depth-medium {
  transform: translateZ(75px);
}

@media (prefers-reduced-motion: reduce) {
  .card-3d,
  .card-3d:hover,
  .depth-high,
  .card-3d:hover .depth-high,
  .depth-base,
  .card-3d:hover .depth-base,
  .depth-strong,
  .card-3d:hover .depth-strong,
  .depth-medium,
  .card-3d:hover .depth-medium {
    transition: none;
    transform: none;
  }
}

.gradient-name-glow {
  animation: gradientNameFlow 5.5s ease-in-out infinite;
}

@keyframes gradientNameFlow {
  0% {
    background-position: 0% 50%;
    text-shadow: 0 0 8px rgba(97, 157, 253, 0.35);
  }
  50% {
    background-position: 100% 50%;
    text-shadow: 0 0 12px rgba(129, 140, 248, 0.45);
  }
  100% {
    background-position: 0% 50%;
    text-shadow: 0 0 8px rgba(52, 211, 153, 0.35);
  }
}

.galaxy-container {
  background: #000000;
  height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  position: relative;
  font-family: "Montserrat", sans-serif;
}

.stars-layer1 {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 1px;
  height: 1px;
  background: transparent;
  z-index: 1;
  box-shadow:
    15vw 10vh 1px #fff, 35vw 25vh 1px #fff, 85vw 15vh 1px #fff,
    55vw 65vh 1.5px #fff, 20vw 85vh 1px #fff, 90vw 90vh 1px #fff,
    40vw 40vh 1px rgba(255,255,255,0.5), 70vw 10vh 1px #fff,
    8vw 18vh 1px rgba(255,255,255,0.7), 12vw 32vh 1px rgba(255,255,255,0.8),
    18vw 58vh 1px rgba(255,255,255,0.75), 24vw 72vh 1px rgba(255,255,255,0.72),
    28vw 44vh 1px rgba(255,255,255,0.8), 33vw 14vh 1px rgba(255,255,255,0.68),
    39vw 82vh 1px rgba(255,255,255,0.76), 46vw 26vh 1px rgba(255,255,255,0.82),
    52vw 38vh 1px rgba(255,255,255,0.78), 57vw 12vh 1px rgba(255,255,255,0.7),
    63vw 76vh 1px rgba(255,255,255,0.8), 68vw 52vh 1px rgba(255,255,255,0.75),
    73vw 24vh 1px rgba(255,255,255,0.78), 79vw 62vh 1px rgba(255,255,255,0.8),
    84vw 48vh 1px rgba(255,255,255,0.7), 92vw 34vh 1px rgba(255,255,255,0.8),
    96vw 66vh 1px rgba(255,255,255,0.74), 4vw 74vh 1px rgba(255,255,255,0.7),
    11vw 92vh 1px rgba(255,255,255,0.76), 27vw 94vh 1px rgba(255,255,255,0.7),
    43vw 96vh 1px rgba(255,255,255,0.72), 59vw 94vh 1px rgba(255,255,255,0.78),
    76vw 92vh 1px rgba(255,255,255,0.75), 88vw 86vh 1px rgba(255,255,255,0.7),
    6vw 8vh 1px rgba(255,255,255,0.68), 9vw 26vh 1px rgba(255,255,255,0.7),
    13vw 48vh 1px rgba(255,255,255,0.72), 16vw 70vh 1px rgba(255,255,255,0.69),
    19vw 36vh 1px rgba(255,255,255,0.74), 23vw 6vh 1px rgba(255,255,255,0.66),
    26vw 54vh 1px rgba(255,255,255,0.7), 31vw 66vh 1px rgba(255,255,255,0.73),
    34vw 92vh 1px rgba(255,255,255,0.68), 37vw 58vh 1px rgba(255,255,255,0.72),
    41vw 12vh 1px rgba(255,255,255,0.69), 47vw 68vh 1px rgba(255,255,255,0.74),
    49vw 90vh 1px rgba(255,255,255,0.67), 53vw 8vh 1px rgba(255,255,255,0.7),
    56vw 34vh 1px rgba(255,255,255,0.71), 61vw 58vh 1px rgba(255,255,255,0.73),
    64vw 90vh 1px rgba(255,255,255,0.68), 67vw 8vh 1px rgba(255,255,255,0.7),
    71vw 34vh 1px rgba(255,255,255,0.72), 77vw 6vh 1px rgba(255,255,255,0.7),
    81vw 18vh 1px rgba(255,255,255,0.69), 83vw 76vh 1px rgba(255,255,255,0.73),
    87vw 52vh 1px rgba(255,255,255,0.68), 91vw 14vh 1px rgba(255,255,255,0.72),
    94vw 40vh 1px rgba(255,255,255,0.7), 98vw 78vh 1px rgba(255,255,255,0.69);
  animation: twinkle-fade 8s infinite alternate;
}

.stars-layer1::before,
.stars-layer1::after {
  content: "";
  position: absolute;
  inset: 0;
  width: 1px;
  height: 1px;
  background: transparent;
  box-shadow: inherit;
}

.stars-layer1::before {
  transform: translate3d(7vw, -9vh, 0) scale(0.95);
  opacity: 0.65;
}

.stars-layer1::after {
  transform: translate3d(-11vw, 8vh, 0) scale(0.9);
  opacity: 0.55;
}

.stars-layer2 {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 2px;
  height: 2px;
  background: transparent;
  z-index: 1;
  box-shadow:
    10vw 40vh 2px rgba(255,255,255,0.8), 80vw 30vh 2px #fff,
    45vw 80vh 2.5px rgba(255,255,255,0.9), 5vw 10vh 2px #fff,
    22vw 18vh 2px rgba(255,255,255,0.9), 32vw 58vh 2px rgba(255,255,255,0.88),
    58vw 22vh 2.5px rgba(255,255,255,0.95), 66vw 72vh 2px rgba(255,255,255,0.86),
    74vw 46vh 2px rgba(255,255,255,0.9), 14vw 76vh 2px rgba(255,255,255,0.86),
    92vw 54vh 2.5px rgba(255,255,255,0.95), 38vw 34vh 2px rgba(255,255,255,0.88),
    8vw 62vh 2px rgba(255,255,255,0.9), 18vw 28vh 2px rgba(255,255,255,0.86),
    27vw 86vh 2px rgba(255,255,255,0.92), 41vw 16vh 2.5px rgba(255,255,255,0.94),
    53vw 48vh 2px rgba(255,255,255,0.88), 62vw 12vh 2px rgba(255,255,255,0.9),
    71vw 84vh 2px rgba(255,255,255,0.9), 86vw 24vh 2.5px rgba(255,255,255,0.94);
  animation: twinkle-pulse 5s infinite ease-in-out;
}

.stars-layer2::before,
.stars-layer2::after {
  content: "";
  position: absolute;
  inset: 0;
  width: 2px;
  height: 2px;
  background: transparent;
  box-shadow: inherit;
}

.stars-layer2::before {
  transform: translate3d(9vw, -7vh, 0) scale(0.92);
  opacity: 0.6;
}

.stars-layer2::after {
  transform: translate3d(-8vw, 10vh, 0) scale(0.88);
  opacity: 0.52;
}

.stars-layer3 {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 1px;
  height: 1px;
  background: transparent;
  z-index: 1;
  opacity: 0.58;
  box-shadow:
    3vw 12vh 1px rgba(255,255,255,0.7), 7vw 28vh 1px rgba(255,255,255,0.6),
    12vw 6vh 1px rgba(255,255,255,0.72), 16vw 22vh 1px rgba(255,255,255,0.66),
    19vw 46vh 1px rgba(255,255,255,0.7), 24vw 64vh 1px rgba(255,255,255,0.65),
    28vw 82vh 1px rgba(255,255,255,0.68), 33vw 18vh 1px rgba(255,255,255,0.62),
    37vw 36vh 1px rgba(255,255,255,0.7), 42vw 54vh 1px rgba(255,255,255,0.64),
    46vw 74vh 1px rgba(255,255,255,0.7), 51vw 14vh 1px rgba(255,255,255,0.66),
    56vw 30vh 1px rgba(255,255,255,0.72), 61vw 50vh 1px rgba(255,255,255,0.63),
    66vw 70vh 1px rgba(255,255,255,0.7), 71vw 88vh 1px rgba(255,255,255,0.65),
    76vw 8vh 1px rgba(255,255,255,0.68), 81vw 24vh 1px rgba(255,255,255,0.72),
    86vw 44vh 1px rgba(255,255,255,0.64), 91vw 62vh 1px rgba(255,255,255,0.7),
    95vw 84vh 1px rgba(255,255,255,0.66);
  animation: twinkle-fade 11s infinite alternate;
}

@media (min-width: 1200px) {
  .galaxy-container::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    width: 1px;
    height: 1px;
    opacity: 0.72;
    background: transparent;
    box-shadow:
      2vw 9vh 1px rgba(255,255,255,0.68), 6vw 44vh 1px rgba(255,255,255,0.58),
      9vw 73vh 1px rgba(255,255,255,0.62), 13vw 19vh 1px rgba(255,255,255,0.74),
      17vw 61vh 1px rgba(255,255,255,0.66), 21vw 8vh 1px rgba(255,255,255,0.7),
      24vw 37vh 1px rgba(255,255,255,0.63), 29vw 79vh 1px rgba(255,255,255,0.6),
      31vw 14vh 1px rgba(255,255,255,0.72), 35vw 55vh 1px rgba(255,255,255,0.64),
      39vw 26vh 1px rgba(255,255,255,0.6), 43vw 87vh 1px rgba(255,255,255,0.7),
      47vw 7vh 1px rgba(255,255,255,0.63), 52vw 42vh 1px rgba(255,255,255,0.68),
      55vw 74vh 1px rgba(255,255,255,0.58), 58vw 18vh 1px rgba(255,255,255,0.7),
      62vw 63vh 1px rgba(255,255,255,0.6), 66vw 31vh 1px rgba(255,255,255,0.64),
      69vw 89vh 1px rgba(255,255,255,0.66), 73vw 12vh 1px rgba(255,255,255,0.72),
      77vw 48vh 1px rgba(255,255,255,0.62), 81vw 23vh 1px rgba(255,255,255,0.7),
      84vw 67vh 1px rgba(255,255,255,0.6), 88vw 4vh 1px rgba(255,255,255,0.64),
      91vw 39vh 1px rgba(255,255,255,0.7), 94vw 82vh 1px rgba(255,255,255,0.62),
      97vw 16vh 1px rgba(255,255,255,0.66);
    animation: twinkle-fade 9s infinite alternate;
  }

  .galaxy-container::after {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    width: 2px;
    height: 2px;
    opacity: 0.62;
    background: transparent;
    box-shadow:
      4vw 28vh 2px rgba(255,255,255,0.84), 11vw 66vh 2px rgba(255,255,255,0.76),
      18vw 33vh 2px rgba(255,255,255,0.8), 27vw 51vh 2px rgba(255,255,255,0.86),
      34vw 9vh 2px rgba(255,255,255,0.82), 41vw 70vh 2px rgba(255,255,255,0.78),
      49vw 24vh 2px rgba(255,255,255,0.8), 57vw 57vh 2px rgba(255,255,255,0.88),
      64vw 15vh 2px rgba(255,255,255,0.82), 72vw 76vh 2px rgba(255,255,255,0.8),
      79vw 36vh 2px rgba(255,255,255,0.86), 87vw 59vh 2px rgba(255,255,255,0.8),
      93vw 11vh 2px rgba(255,255,255,0.84);
    animation: twinkle-pulse 6s infinite ease-in-out;
  }
}

.milky-way {
  position: absolute;
  width: 150vw;
  height: 60vh;
  background: radial-gradient(ellipse at center, rgba(100, 150, 255, 0.1) 0%, transparent 70%);
  transform: rotate(-20deg);
  filter: blur(60px);
  z-index: 0;
}

.galaxy-earth {
  position: absolute;
  left: 50%;
  top: 90%;
  width: min(76vw, 820px);
  transform: translate(-50%, -50%);
  z-index: 3;
  pointer-events: none;
  opacity: 0.9;
  filter: drop-shadow(0 0 24px rgba(120, 180, 255, 0.18));
}

.galaxy-moon-wrap {
  position: absolute;
  top: 18%;
  right: 10%;
  width: min(28vw, 260px);
  z-index: 6;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  pointer-events: none;
}

.galaxy-moon-wrap:hover,
.galaxy-moon-wrap:focus-within {
  z-index: 14;
}

.galaxy-moon {
  position: relative;
  width: 100%;
  aspect-ratio: 1 / 1;
  pointer-events: auto;
  cursor: pointer;
  transition: filter 0.22s ease;
  z-index: 1;
}

.galaxy-moon:hover {
  filter: drop-shadow(0 0 18px rgba(255, 255, 255, 0.3));
}

.galaxy-moon-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
  display: block;
  filter: drop-shadow(0 0 14px rgba(255, 255, 255, 0.18));
}

.galaxy-moon::before {
  content: "";
  position: absolute;
  inset: -6%;
  border-radius: 50%;
  border: 1px solid rgba(180, 220, 255, 0.35);
  box-shadow:
    0 0 30px rgba(125, 190, 255, 0.18),
    inset 0 0 24px rgba(215, 240, 255, 0.14);
  opacity: 0.65;
  animation: moon-ring-pulse 2.8s ease-out infinite;
  pointer-events: none;
}

.galaxy-moon::after {
  content: none;
}

.galaxy-moon:focus-visible {
  outline: 2px solid rgba(223, 240, 255, 0.9);
  outline-offset: 5px;
}

.galaxy-moon-shadow {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  mix-blend-mode: normal;
  box-shadow:
    inset 0 0 10px rgba(0, 0, 0, 0.26),
    inset -3px 0 8px rgba(0, 0, 0, 0.18);
  filter: blur(0.2px);
  transition: opacity 0.35s ease;
  pointer-events: none;
}

.moon-phase-board {
  width: 100%;
  position: relative;
  padding: 8px;
  border-radius: 7px;
  border: 1px solid rgba(140, 140, 140, 0.45);
  background: linear-gradient(180deg, rgba(48, 49, 52, 0.96) 0%, rgba(20, 21, 24, 0.98) 100%);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.42);
  pointer-events: auto;
  overflow: hidden;
}

.moon-phase-board::before,
.moon-phase-board::after {
  content: "";
  position: absolute;
  top: 50%;
  width: 7px;
  height: 7px;
  border-radius: 50%;
  transform: translateY(-50%);
  background: radial-gradient(circle at 30% 30%, #cbcbcb 0%, #8c8c8c 42%, #3a3a3a 100%);
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.3), 0 0 0 1px rgba(0, 0, 0, 0.65);
  opacity: 0.78;
}

.moon-phase-board::before {
  left: 6px;
}

.moon-phase-board::after {
  right: 6px;
}

.moon-phase-row {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: 2px;
  padding: 8px 12px;
  border-radius: 4px;
  border: 1px solid rgba(117, 117, 117, 0.36);
  background:
    repeating-linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.018) 0px,
      rgba(255, 255, 255, 0.018) 1px,
      rgba(0, 0, 0, 0) 1px,
      rgba(0, 0, 0, 0) 3px
    ),
    linear-gradient(180deg, rgba(20, 22, 24, 0.98) 0%, rgba(10, 11, 12, 1) 100%);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06), inset 0 -1px 0 rgba(0, 0, 0, 0.6);
}

.moon-phase-board--hero {
  max-width: min(32vw, 300px);
}

.moon-phase-board--modal {
  margin: 0 16px 16px;
}

.moon-phase-cell {
  --cell-delay: 0ms;
  position: relative;
  min-width: 0.72em;
  height: 1.42em;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 0.17em;
  border-radius: 2px;
  border: 1px solid rgba(165, 165, 165, 0.22);
  background:
    linear-gradient(
      180deg,
      rgba(105, 108, 112, 0.16) 0%,
      rgba(47, 49, 53, 0.22) 48%,
      rgba(15, 16, 19, 0.72) 52%,
      rgba(10, 10, 12, 0.95) 100%
    );
  color: #f6f0df;
  font-family: "Lucida Console", Monaco, "Courier New", monospace;
  font-size: clamp(9px, 0.95vw, 12px);
  font-weight: 800;
  letter-spacing: 0.03em;
  text-shadow: 0 0 5px rgba(255, 240, 193, 0.3);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), inset 0 -1px 0 rgba(0, 0, 0, 0.75);
  animation: board-flip-in 620ms cubic-bezier(0.24, 0.9, 0.38, 1) both;
  animation-delay: var(--cell-delay);
}

.moon-phase-cell::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  height: 1px;
  background: rgba(0, 0, 0, 0.58);
  box-shadow: 0 -1px 0 rgba(255, 255, 255, 0.08);
  pointer-events: none;
}

.moon-phase-cell:nth-child(4n) {
  animation-name: board-flip-in, board-flicker;
  animation-duration: 620ms, 2.9s;
  animation-timing-function: cubic-bezier(0.24, 0.9, 0.38, 1), linear;
  animation-delay: var(--cell-delay), calc(var(--cell-delay) + 650ms);
  animation-fill-mode: both;
  animation-iteration-count: 1, infinite;
}

@keyframes board-flip-in {
  0% {
    transform: rotateX(-86deg);
    opacity: 0;
    filter: brightness(1.28);
  }
  58% {
    transform: rotateX(10deg);
    opacity: 1;
  }
  100% {
    transform: rotateX(0deg);
    opacity: 1;
    filter: brightness(1);
  }
}

@keyframes board-flicker {
  0%, 96%, 100% {
    opacity: 1;
  }
  97% {
    opacity: 0.8;
  }
  98% {
    opacity: 0.95;
  }
}

@keyframes moon-ring-pulse {
  0% {
    transform: scale(0.97);
    opacity: 0.62;
  }
  70% {
    transform: scale(1.06);
    opacity: 0.14;
  }
  100% {
    transform: scale(1.08);
    opacity: 0;
  }
}

@media (max-width: 640px) {
  .moon-phase-board--hero {
    max-width: min(44vw, 210px);
  }
}

.shooting-star {
  position: absolute;
  top: 0;
  left: 0;
  left: 50%;
  width: 120px;
  height: 2px;
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0.35) 45%,
    rgba(255,255,255,1) 100%
  );
  transform: rotate(140deg);
  transform-origin: right center;
  box-shadow: 0 0 10px rgba(255,255,255,0.45);
  opacity: 0;
  animation: shooting-fall 8s infinite linear;
}

@keyframes twinkle-fade {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

@keyframes twinkle-pulse {
  0%, 100% { opacity: 0.85; }
  50% { opacity: 1; }
}

@keyframes shooting-fall {
  0% { transform: translate3d(0, 0, 0) rotate(140deg); opacity: 0; }
  8% { opacity: 1; }
  30% { transform: translate3d(-900px, 900px, 0) rotate(140deg); opacity: 0; }
  100% { opacity: 0; }
}
