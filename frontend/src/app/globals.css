@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  scroll-behavior: smooth;
}

/* ===== Glowing Edge Card ===== */
:root{
  --glow-sens: 20;
  --blend: soft-light;
  --glow-blend: plus-lighter;
  --glow-color: 40deg 80% 80%;
}

.glow-card{
  /* 레이아웃/모양 */
  position: relative;
  isolation: isolate;              /* 의사요소 겹침 안정화 */
  border-radius: 1.5rem;           /* Tailwind의 rounded-3xl와 일치 */
  border: 1px solid rgb(255 255 255 / 25%);
  background: linear-gradient(8deg, hsl(260 10% 12%) 75%, hsl(260 10% 14%) 75.5%);
  transition: box-shadow .25s ease-out, filter .25s ease-out;
  overflow: hidden;
    --edge: 50px;   /* 엣지 색 두께 (작게=테두리 얇음, 크게=두꺼움) */

  /* 효과 관련 변수 */
  --color-sens: calc(var(--glow-sens) + 20);
}

/* hover 시 기본 카드 반응 (선택) */
.glow-card:hover{
  filter: brightness(1.04);
  box-shadow:
    0 1px 2px rgba(0,0,0,.08),
    0 8px 24px rgba(0,0,0,.18);
}

/* 공통: 의사요소와 .glow의 기본 세팅 */
.glow-card::before{
  border: 1px solid transparent;
  background:
    linear-gradient(#0000 0 100%) border-box,
    radial-gradient(at 80% 55%, hsl(268 100% 76%) 0, transparent 50%) border-box,
    radial-gradient(at 69% 34%, hsl(349 100% 74%) 0, transparent 50%) border-box,
    radial-gradient(at  8%  6%, hsl(136 100% 78%) 0, transparent 50%) border-box,
    radial-gradient(at 41% 38%, hsl(192 100% 64%) 0, transparent 50%) border-box,
    radial-gradient(at 86% 85%, hsl(186 100% 74%) 0, transparent 50%) border-box,
    radial-gradient(at 82% 18%, hsl( 52 100% 65%) 0, transparent 50%) border-box,
    radial-gradient(at 51%  4%, hsl( 12 100% 72%) 0, transparent 50%) border-box,
    linear-gradient(#c299ff 0 100%) border-box;

  /* 엣지 근접도에 따라 투명도 */
  opacity: calc((var(--pointer-d,0) - var(--color-sens)) / (100 - var(--color-sens)));

  /* --- 여기부터 마스크를 '엣지 링' ∩ '포인터 방향 콘'으로 교차 --- */
  mask-image:
    var(--ring),
    conic-gradient(from var(--pointer-°,0deg) at center, #000 25%, #0000 40% 60%, #000 75%);
  /* 표준 */
  mask-composite: intersect;
  /* Safari/WebKit 교차(Intersection) 대체 */
  -webkit-mask-image:
    var(--ring),
    conic-gradient(from var(--pointer-°,0deg) at center, #000 25%, #0000 40% 60%, #000 75%);
  -webkit-mask-composite: source-over, source-in;
}
.glow-card::after{
  border: 1px solid transparent;
  background:
    radial-gradient(at 80% 55%, hsl(268 100% 76%) 0, transparent 50%) padding-box,
    radial-gradient(at 69% 34%, hsl(349 100% 74%) 0, transparent 50%) padding-box,
    radial-gradient(at  8%  6%, hsl(136 100% 78%) 0, transparent 50%) padding-box,
    radial-gradient(at 41% 38%, hsl(192 100% 64%) 0, transparent 50%) padding-box,
    radial-gradient(at 86% 85%, hsl(186 100% 74%) 0, transparent 50%) padding-box,
    radial-gradient(at 82% 18%, hsl( 52 100% 65%) 0, transparent 50%) padding-box,
    radial-gradient(at 51%  4%, hsl( 12 100% 72%) 0, transparent 50%) padding-box,
    linear-gradient(#c299ff 0 100%) padding-box;

  opacity: calc((var(--pointer-d,0) - var(--color-sens)) / (100 - var(--color-sens)));
  mix-blend-mode: var(--blend);

  /* --- 엣지 링 ∩ 포인터 방향 콘 --- */
  mask-image:
    var(--ring),
    conic-gradient(from var(--pointer-°,0deg) at center, #0000 5%, #000 15% 85%, #0000 95%);
  mask-composite: intersect;

  -webkit-mask-image:
    var(--ring),
    conic-gradient(from var(--pointer-°,0deg) at center, #0000 5%, #000 15% 85%, #0000 95%);
  -webkit-mask-composite: source-over, source-in;
}
.glow-card > .glow{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  transition: opacity .25s ease-out;
  z-index: -1; /* 배경에서 동작 */
    --outset: 100px; /* 커질수록 바깥으로 더 퍼짐 */
}

/* 포인터가 멀면 자연스럽게 사라지게 */
.glow-card:not(:hover):not(.glow-animating)::before,
.glow-card:not(:hover):not(.glow-animating)::after,
.glow-card:not(:hover):not(.glow-animating) > .glow{
  opacity: 0;
  transition: opacity .6s ease-in-out;
}

/* ::after — 내부 메시 배경 + 스퀴클 컷아웃 + 원뿔 마스크 */
.glow-card::after{
  border: 1px solid transparent;
  background:
    radial-gradient(at 80% 55%, hsl(268 100% 76%) 0, transparent 50%) padding-box,
    radial-gradient(at 69% 34%, hsl(349 100% 74%) 0, transparent 50%) padding-box,
    radial-gradient(at  8%  6%, hsl(136 100% 78%) 0, transparent 50%) padding-box,
    radial-gradient(at 41% 38%, hsl(192 100% 64%) 0, transparent 50%) padding-box,
    radial-gradient(at 86% 85%, hsl(186 100% 74%) 0, transparent 50%) padding-box,
    radial-gradient(at 82% 18%, hsl( 52 100% 65%) 0, transparent 50%) padding-box,
    radial-gradient(at 51%  4%, hsl( 12 100% 72%) 0, transparent 50%) padding-box,
    linear-gradient(#c299ff 0 100%) padding-box;
  mask-image:
    linear-gradient(#000, #000),
    radial-gradient(ellipse at 50% 50%, #000 40%, #0000 65%),
    radial-gradient(ellipse at 66% 66%, #000 5%, #0000 40%),
    radial-gradient(ellipse at 33% 33%, #000 5%, #0000 40%),
    radial-gradient(ellipse at 66% 33%, #000 5%, #0000 40%),
    radial-gradient(ellipse at 33% 66%, #000 5%, #0000 40%),
    conic-gradient(from var(--pointer-°,0deg) at center, #0000 5%, #000 15% 85%, #0000 95%);
  /* 사파리 호환용 */
  -webkit-mask-composite: destination-out, source-over, source-over, source-over, source-over, source-over, source-over;
  mask-composite: subtract, add, add, add, add, add;

  opacity: calc((var(--pointer-d,0) - var(--color-sens)) / (100 - var(--color-sens)));
  mix-blend-mode: var(--blend);
}

/* .glow — 바깥쪽 글로우 (outset 패딩으로 넘치게) */
.glow-card > .glow{
  --outset: 40px;
  inset: calc(var(--outset) * -1);
  pointer-events: none;
  z-index: 1;
  mask-image: conic-gradient(from var(--pointer-°,0deg) at center, #000 2.5%, #0000 10% 90%, #000 97.5%);
  opacity: calc((var(--pointer-d,0) - var(--glow-sens)) / (100 - var(--glow-sens)));
  mix-blend-mode: var(--glow-blend);
}

.glow-card > .glow::before{
  content:"";
  position: absolute;
  inset: var(--outset);
  border-radius: inherit;
  box-shadow:
    inset 0 0 0 1px hsl(var(--glow-color) / 1),
    inset 0 0 2px 2px hsl(var(--glow-color) / .9),
    inset 0 0 5px 1px hsl(var(--glow-color) / .75),
    inset 0 0 8px 1px hsl(var(--glow-color) / .66),
    inset 0 0 15px 0 hsl(var(--glow-color) / .5),
    inset 0 0 25px 2px hsl(var(--glow-color) / .3),
    inset 0 0 50px 2px hsl(var(--glow-color) / .1),
    0 0 2px 2px hsl(var(--glow-color) / .9),
    0 0 5px 1px hsl(var(--glow-color) / .75),
    0 0 8px 1px hsl(var(--glow-color) / .66),
    0 0 15px 0 hsl(var(--glow-color) / .5),
    0 0 25px 2px hsl(var(--glow-color) / .3),
    0 0 50px 2px hsl(var(--glow-color) / .1);
}
